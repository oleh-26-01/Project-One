<UserControl x:Class="Project_One.Controls.ThirdTopPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:viewModels="clr-namespace:Project_One.ViewModels"
             mc:Ignorable="d"
             d:DesignHeight="33" d:DesignWidth="1010">
    <UserControl.Resources>
        <!-- Local ButtonStyle and LabelStyle removed -->
        <DataTemplate x:Key="EvolutionTemplate" DataType="{x:Type viewModels:EvolutionViewModel}">
            <Grid ShowGridLines="False">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.75*" />
                    <ColumnDefinition Width="2.25*" />
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="0" x:Name="ControlGrid" 
                      Background="{StaticResource SecondaryColorBrush}" Margin="0 0 1 0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0" x:Name="ActionButton"
                            Content="{Binding ActionButtonContext}" 
                            Style="{StaticResource BaseButtonStyle}" 
                            Foreground="{Binding ActionButtonBackground}"/>
                    <Button Grid.Column="1" x:Name="SaveButton"
                            Content="Save" Style="{StaticResource SuccessButtonStyle}" />
                    <Button Grid.Column="2" x:Name="ResetButton"
                            Content="Reset" Style="{StaticResource DangerButtonStyle}" />
                </Grid>
                <Grid Grid.Column="1" x:Name="InfoGrid" Background="{StaticResource SecondaryColorBrush}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <Label Grid.Column="0" x:Name="ProgressLabel" 
                           Content="{Binding ProgressInfo}" 
                           Style="{StaticResource BaseLabelStyle}" HorizontalContentAlignment="Center" />
                    <Label Grid.Column="1" x:Name="CurrentValueLabel" 
                           Content="{Binding CurrentValueInfo}" 
                           Style="{StaticResource BaseLabelStyle}" HorizontalContentAlignment="Center" 
                           ToolTip="{Binding ValueToolTip}"/>
                    <Label Grid.Column="2" x:Name="TimeSpendLabel" 
                           Content="{Binding TimeSpendInfo}" 
                           Style="{StaticResource BaseLabelStyle}" HorizontalContentAlignment="Center" />
                    <Label Grid.Column="3" x:Name="SaveValueLabel" 
                           Content="{Binding SaveValueInfo}" 
                           Style="{StaticResource BaseLabelStyle}" HorizontalContentAlignment="Center" 
                           ToolTip="{Binding ValueToolTip}"/>
                </Grid>
            </Grid>
        </DataTemplate>
    </UserControl.Resources>

    <Grid ShowGridLines="False">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1.5*" />
            <ColumnDefinition Width="7*" />
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0" Background="{StaticResource SecondaryColorBrush}" Margin="0,0,1,0">
            <CheckBox x:Name="FollowCarCheckBox" Content="Follow Car" IsChecked="True"
                      Style="{StaticResource BaseCheckBoxStyle}" FlowDirection="RightToLeft"
                      HorizontalAlignment="Center" />
        </Grid>
        <Grid Grid.Column="1">
            <ContentControl ContentTemplate="{StaticResource EvolutionTemplate}">
                <viewModels:EvolutionViewModel/>
            </ContentControl>
        </Grid>
    </Grid>
</UserControl>